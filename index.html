<!DOCTYPE html>
<html>
  <head>  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
 integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" 
crossorigin="anonymous">
  <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.mask/1.14.15/jquery.mask.min.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <?!= include('JavaScript'); ?>
  </head>
  
  <body>
    <div class="container">
      <div class="">
        
          <form id="myForm" onsubmit="handleFormSubmit(this)"> 

            <!-- Cabeçalho da Página -->
            <nav class="navbar navbar-light" style="background-color: #f7b12f;">

              <a class="navbar-brand" href="#">
                <!-- Logo -->
                <img src="https://www.adoro.com.br/logotipo.png" width="55" height="45" class="d-inline-block align-top">

                <!-- Nome -->
                <b style="color: #2b3474;">Pesquisa de Estoque</b>
              </a>

              <!-- Data atual ocultada -->
              <div class="form-group col-md-3">
                  <input type="hidden" class="form-control" id="data_atual" name="data_atual">
              </div>

            </nav>
            
            <br>
           
            <div class="form-row">

              <!-- Código da Loja -->
              <div class="form-group col-md-2">
                <label for="pdv">Cód. Loja</label>
                <input type="text" class="form-control" id="pdv" name="pdv" placeholder="000000" onkeypress="$(this).mask('000000', {reverse: true});" required autocomplete="off">
              </div>

              <!-- Motivo da Execução ou não Execução -->
              <div class="form-group col-md-3">
                <label for="motivo">Motivo da Execução</label>
                <select class="form-control" id="motivo" name="motivo" required>
                  <option value="">Selecione uma opção</option>
                  <option value="Loja OK!">Loja OK!</option>
                  <option value="Permanência em outra loja">Permanência em outra loja</option>
                  <option value="Alteração do Roteiro">Alteração do Roteiro</option>
                  <option value="Atestado Médico">Atestado Médico</option>
                  <option value="Reunião">Reunião</option>
                  <option value="Outros">Outros</option>
                </select>
              </div>

              <!-- Comentário -->
              <div class="form-group col-md-7">
                  <label for="comentario">Comentário</label>
                  <textarea class="form-control" id="comentario" name="comentario" rows="3" cols="" autocomplete="off"></textarea>
              </div>

            </div>

            <div class="table-responsive">
            <table class="mx-auto w-auto">

              <!-- Cabeçalho da Tabela de Pesquisa -->
              <thead style="background-color: #2b3474; color: #fff; ">
                <tr class="text-center">
                  <th style="width: 70%;">Produto</th>
                  <th style="width: 30%;">Estoque (qtd cx)</th>
                </tr>
              </thead>

              <tbody>

                <!-- Linha 1 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">COXINHA MARIN RESF PV</td>
                  <td><input type="number" id="estoque1" name="estoque1" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>

                <!-- Linha 2 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">PASSARINHO MARIN RESFR PV</td>
                  <td><input type="number" id="estoque2" name="estoque2" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>

                <!-- Linha 3 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">1/2 ASA MARIN RESFR PV</td>
                  <td><input type="number" id="estoque3" name="estoque3" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>

                <!-- Linha 4 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">FILE DE COXA C/P CG (PCT)</td>
                  <td><input type="number" id="estoque4" name="estoque4" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>

                <!-- Linha 5 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">FATIADOS CG (TODAS AS GRAMATURAS)</td>
                  <td><input type="number" id="estoque5" name="estoque5" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>

                <!-- Linha 6 da Tabela da Pesquisa -->
                <tr>
                  <td class="text-center">FILE DE COXA MARIN RESF</td>
                  <td><input type="number" id="estoque6" name="estoque6" class="form-control" autocomplete="off" min="0"></td>                  
                </tr>
                
              </tbody>  
            </table>
            </div>

            <br>
            
            <!-- Botão de Envio -->
            <div class="form-group col-md-12">
               <button type="submit" class="btn btn-success" style="float: right;">Enviar Pesquisa</button>
            </div>
            <br>

          </form><div id="output"></div>            

      </div>

      <br>

      <!-- Rodapé da Página -->
      <footer class="bg-light text-center text-lg-start">
        <!-- Copyright -->
        <div class="text-center p-3" style="background-color: #f7b12f; font-size: 12px;">
          <b>© 2022 Copyright: Ad'oro - Área de Inteligência de Mercado</b>
        </div>
        <!-- Copyright -->
      </footer>
             
    </div>   
  </body>
</html>

<!-- Data do Registro (Atual) -->
<script>

var today = new Date();
var dy = today.getDate();
var mt = today.getMonth()+1;
var yr = today.getFullYear();
document.getElementById('data_atual').value= dy+"/"+mt+"/"+yr;

</script>

<!-- Preenchimento obrigatório -->
<script>
var campoMotivo = document.getElementById('motivo');

campoMotivo.onchange = function() { 
	
var motivo = campoMotivo.value;

if(motivo == 'Outros') { /* Se for OUTROS somente o comentário é obrigatório */
    document.getElementById('comentario').required = true;
    document.getElementById('estoque1').required = false;
    document.getElementById('estoque2').required = false;
    document.getElementById('estoque3').required = false;
    document.getElementById('estoque4').required = false;
    document.getElementById('estoque5').required = false;
    document.getElementById('estoque6').required = false;
}	else if (motivo == 'Loja OK!') { /* Se for LOJA OK! somente o comentário NÃO é obrigatório */
    document.getElementById('comentario').required = false;
    document.getElementById('estoque1').required = true;
    document.getElementById('estoque2').required = true;
    document.getElementById('estoque3').required = true;
    document.getElementById('estoque4').required = true;
    document.getElementById('estoque5').required = true;
    document.getElementById('estoque6').required = true;
} else { /* outro motivo diferente NEM o comentário e NEM a coleta de estoque é obrigatório */
    document.getElementById('comentario').required = false;
    document.getElementById('estoque1').required = false;
    document.getElementById('estoque2').required = false;
    document.getElementById('estoque3').required = false;
    document.getElementById('estoque4').required = false;
    document.getElementById('estoque5').required = false;
    document.getElementById('estoque6').required = false;
}
}
</script>
